# 项目上下文文档

## 项目概述与目标

**项目名称**: 备忘录小程序样式展示网站

**核心目标**: 创建一个展示备忘录小程序可选样式的网站，让用户能够预览和选择不同的备忘录小程序UI设计方案，并支持通过一句话描述快速生成新的原型设计。

**一句话描述**: 构建一个响应式网站，展示多种备忘录小程序的UI样式方案，支持实时预览、样式切换，以及基于自然语言描述的原型设计生成功能。

**非目标**:
- 不实现完整的备忘录小程序功能（仅展示样式）
- 不涉及后端数据存储
- 不实现用户登录和账户系统
- 不提供实际的备忘录增删改查功能

## 技术栈选择与理由

### 前端技术栈

1. **HTML5 + CSS3**
   - 理由: 基础Web技术，确保兼容性和可维护性
   - 用途: 页面结构和样式定义

2. **JavaScript (ES6+)**
   - 理由: 实现交互功能，如样式切换、预览效果
   - 用途: 动态样式应用、用户交互处理

3. **CSS框架选择（可选）**
   - 方案A: 原生CSS + CSS变量
     - 理由: 轻量级，完全控制样式，易于定制
   - 方案B: Tailwind CSS
     - 理由: 快速开发，响应式设计友好
   - 推荐: 方案A（原生CSS），因为需要展示多种独立样式方案

### 开发工具

- **代码编辑器**: VS Code
- **版本控制**: Git
- **本地服务器**: Live Server 或 Python http.server
- **浏览器**: Chrome/Firefox（用于测试）

### 依赖项清单

- 无外部依赖（纯前端项目）
- 可选：Live Server扩展（VS Code）用于本地开发服务器

## 核心功能模块划分

### 1. 样式展示模块
- **功能**: 展示不同的备忘录小程序UI样式方案
- **包含**: 
  - 样式卡片列表
  - 样式预览区域
  - 样式切换按钮

### 2. 预览模块
- **功能**: 实时预览选中的样式方案
- **包含**:
  - 模拟备忘录界面
  - 示例数据展示
  - 响应式预览（移动端/桌面端）

### 3. 导航模块
- **功能**: 网站导航和样式分类
- **包含**:
  - 顶部导航栏
  - 样式分类筛选
  - 返回顶部功能

### 4. 样式方案库
- **功能**: 存储和管理不同的样式方案
- **包含**:
  - 多种颜色主题（浅色/深色/彩色）
  - 不同的布局风格（列表/卡片/网格）
  - 不同的交互效果（动画/过渡）

### 5. 原型生成器模块
- **功能**: 根据用户的一句话描述自动生成不同结构和功能点的备忘录小程序原型
- **核心定位**: 生成不同的小程序**结构、布局和功能点**，侧重于功能点的差异化，而非仅样式变化
- **重要说明**: 生成的原型**仅应用于预览区域内的备忘录小程序界面**，不会影响页面整体样式（导航栏、卡片列表等）
- **包含**:
  - 自然语言描述输入框
  - 原型生成引擎（解析描述并生成小程序结构和功能方案）
  - 功能点差异化算法（确保新原型与现有原型在功能结构上保持差异）
  - 原型预览和编辑功能
  - 原型保存和导出功能
- **功能点差异化策略**:
  - **结构布局差异化**：生成不同的界面结构（单栏/双栏/三栏布局、顶部导航/底部导航/侧边栏导航等）
  - **功能模块差异化**：包含不同的功能模块（搜索/筛选/排序、分类管理/标签系统、优先级/状态管理、时间线/日历视图等）
  - **交互方式差异化**：不同的交互模式（点击展开/侧滑操作、拖拽排序、批量操作、快捷操作等）
  - **数据展示差异化**：不同的数据展示方式（列表/卡片/网格/时间轴/日历、分组展示/平铺展示、折叠/展开等）
  - **操作流程差异化**：不同的操作流程（快速添加/表单添加、内联编辑/弹窗编辑、确认删除/直接删除等）
- **样式作用域**:
  - 使用CSS作用域选择器（`.preview-content[data-style-id]`）限制样式范围
  - 只影响预览区域内的`.memo-preview`及其子元素
  - 不影响页面其他部分（导航栏、样式卡片、生成器区域等）
  - 通过CSS变量（`--preview-*`）在预览区域内传递样式值
- **支持的原型描述类型**:
  - 结构描述：如"双栏布局"、"底部导航"、"侧边栏分类"
  - 功能描述：如"带标签系统"、"优先级管理"、"日历视图"、"拖拽排序"
  - 交互描述：如"侧滑操作"、"批量编辑"、"快速添加"
  - 组合描述：如"双栏布局带标签系统和日历视图"、"底部导航的侧滑操作备忘录"

- **生成器预览模块**（核心展示组件）:
  - **模块定位**: 实时展示根据文字描述生成的差异化原型，确保每种文字需求都能产生视觉和功能上的明显差异
  - **预览容器结构**:
    - **主预览区域** (`.prototype-preview-container`): 承载完整的小程序界面预览
      - 尺寸控制：支持移动端尺寸（375x667px）、平板尺寸（768x1024px）、桌面端尺寸（自适应）
      - 响应式切换：提供设备类型切换按钮，实时调整预览尺寸
      - 缩放控制：支持50%-200%缩放，方便查看细节
    - **预览画布** (`.preview-canvas`): 实际渲染小程序界面的容器
      - 背景模拟：提供iOS/Android/Web三种系统背景样式
      - 安全区域：模拟刘海屏、底部安全区域等真实设备特征
      - 滚动区域：独立的滚动容器，模拟真实小程序滚动体验
    - **预览工具栏** (`.preview-toolbar`): 预览控制功能
      - 设备切换：手机/平板/桌面端快速切换
      - 缩放控制：放大/缩小/重置按钮
      - 刷新预览：重新渲染当前原型
      - 全屏预览：全屏模式查看原型
      - 对比模式：与现有原型并排对比
  - **实时差异化展示机制**:
    - **结构差异化可视化**:
      - 单栏布局：垂直列表，占满宽度，左侧对齐
      - 双栏布局：左侧固定宽度（30%），右侧内容区（70%），中间分隔线
      - 三栏布局：左中右三列，比例可调（20%-50%-30%），支持拖拽调整
      - 导航位置差异：顶部导航（固定在顶部，下拉时隐藏）、底部导航（固定在底部，始终可见）、侧边栏导航（左侧滑出，遮罩层）
    - **功能模块差异化展示**:
      - 搜索功能：顶部搜索栏（实时搜索/按钮搜索）、搜索图标位置（左侧/居中/右侧）
      - 筛选功能：筛选栏（顶部/侧边栏）、筛选按钮样式（标签式/下拉式/抽屉式）
      - 标签系统：标签位置（标题下方/右上角/底部）、标签样式（圆角/方形/胶囊）、标签颜色（单色/多色/渐变色）
      - 优先级管理：优先级标识（图标/颜色条/数字）、优先级位置（左侧/右侧/顶部）
      - 时间视图：时间线（左侧时间轴/顶部时间轴）、日历（网格日历/列表日历）、日期分组（按天/按周/按月）
    - **交互方式差异化演示**:
      - 侧滑操作：左滑显示操作按钮（删除/编辑/完成）、右滑显示更多操作、滑动距离阈值（30px/50px）
      - 拖拽排序：拖拽手柄（左侧/右侧/任意位置）、拖拽反馈（阴影/缩放/边框高亮）、拖拽限制（仅列表内/跨分组）
      - 批量操作：批量选择模式（多选框/长按进入）、批量操作栏（底部浮动/顶部固定）、批量操作按钮（删除/移动/标记）
      - 快捷操作：悬浮按钮（右下角/左下角/自定义位置）、快捷菜单（圆形展开/扇形展开/列表展开）
    - **数据展示差异化渲染**:
      - 列表视图：单行列表（紧凑/标准/宽松）、多行列表（标题+描述+时间）、分组列表（折叠组/展开组）
      - 卡片视图：卡片样式（圆角卡片/方形卡片/无边框卡片）、卡片布局（单列/双列/三列）、卡片信息密度（精简/标准/详细）
      - 网格视图：网格列数（2列/3列/4列）、网格间距（紧凑/标准/宽松）、网格项内容（图标+文字/纯图标/纯文字）
      - 时间轴视图：时间轴位置（左侧/右侧/居中）、时间轴样式（实线/虚线/点线）、时间节点样式（圆形/方形/图标）
      - 日历视图：日历类型（月视图/周视图/日视图）、事件标记（圆点/色块/图标）、日历交互（点击查看/长按添加）
      - 看板视图：看板列数（3列/4列/5列）、卡片拖拽（列内/跨列）、列标题样式（固定/可编辑/可折叠）
  - **文字需求解析与差异化映射**:
    - **关键词提取引擎**:
      - 结构关键词：单栏/双栏/三栏、顶部/底部/侧边、导航/布局/结构
      - 功能关键词：搜索/筛选/排序、标签/分类/优先级、时间/日历/时间轴、拖拽/批量/快捷
      - 交互关键词：侧滑/点击/长按、内联/弹窗/全屏、确认/直接/批量
      - 展示关键词：列表/卡片/网格、时间轴/日历/看板、折叠/展开/分组
    - **差异化算法**:
      - 结构差异化评分：计算与现有原型的布局差异度（0-100分），确保新原型布局差异度≥40分
      - 功能差异化评分：计算功能模块组合的差异度，确保至少2个功能模块与现有原型不同
      - 交互差异化评分：计算交互方式的差异度，确保至少1种交互方式与现有原型不同
      - 视觉差异化评分：计算颜色、圆角、间距、阴影等视觉元素的差异度，确保视觉差异度≥30分
    - **差异化保证机制**:
      - 自动规避：检测到与现有原型相似度过高（>70%）时，自动调整参数
      - 强制差异化：如果用户描述与现有原型高度相似，系统自动添加1-2个差异化功能点
      - 差异化提示：生成后显示差异化报告，说明与现有原型的差异点
  - **预览实时更新机制**:
    - **增量更新**：只更新变化的部分，保持预览流畅
      - 结构变化：重新构建DOM结构，保留滚动位置
      - 样式变化：动态注入CSS，使用CSS变量实现快速切换
      - 功能变化：动态加载功能模块，保持数据状态
    - **动画过渡**：
      - 布局切换动画：淡入淡出（300ms）、滑动切换（400ms）、缩放切换（350ms）
      - 功能模块出现动画：从上方滑入、从左侧滑入、淡入展开
      - 交互反馈动画：点击波纹效果、悬停高亮、加载骨架屏
    - **状态保持**：
      - 滚动位置保持：切换原型时记录并恢复滚动位置
      - 展开状态保持：保持分组展开/折叠状态
      - 选中状态保持：保持当前选中的项目
  - **预览交互功能**:
    - **可交互预览**：预览区域支持真实交互，非静态展示
      - 点击交互：点击列表项、按钮、标签等元素有真实反馈
      - 滑动交互：支持侧滑操作、上下滚动、左右滑动
      - 拖拽交互：支持拖拽排序、拖拽移动（在支持的布局中）
      - 输入交互：支持在搜索框、输入框中输入文字（仅预览，不保存）
    - **交互反馈**:
      - 点击反馈：按钮点击波纹效果、列表项点击高亮
      - 悬停反馈：桌面端鼠标悬停时显示交互提示
      - 加载反馈：操作后显示加载状态（骨架屏/加载动画）
      - 错误反馈：无效操作显示错误提示（Toast/提示框）
    - **模拟数据**:
      - 自动生成：根据原型功能自动生成合适的示例数据
      - 数据适配：数据格式适配不同的展示方式（列表/卡片/时间轴等）
      - 数据更新：支持手动刷新示例数据，生成新的随机数据
  - **对比预览功能**:
    - **并排对比**：同时显示当前原型和对比原型
      - 分屏模式：左右分屏（50%-50%）、主次分屏（70%-30%）
      - 同步滚动：两个预览区域同步滚动，方便对比
      - 差异高亮：自动高亮两个原型的差异点（不同颜色、不同布局等）
    - **差异标注**:
      - 结构差异标注：标注布局差异（单栏vs双栏）
      - 功能差异标注：标注功能差异（有标签vs无标签）
      - 交互差异标注：标注交互差异（侧滑vs点击）
    - **对比报告**:
      - 自动生成：生成文字版差异对比报告
      - 差异列表：列出所有差异点（结构、功能、交互、视觉）
      - 差异评分：给出差异度评分（0-100分）
  - **预览编辑功能**:
    - **实时编辑**：在预览区域直接编辑原型
      - 样式编辑：实时调整颜色、圆角、间距等样式参数
      - 布局编辑：拖拽调整布局比例、组件位置
      - 功能编辑：启用/禁用功能模块、调整功能参数
    - **编辑工具栏**:
      - 样式编辑器：颜色选择器、数值输入框（圆角、间距等）、开关按钮（阴影、边框等）
      - 布局编辑器：拖拽手柄、比例调整滑块、对齐辅助线
      - 功能编辑器：功能模块开关、功能参数设置
    - **编辑历史**:
      - 撤销/重做：支持最多20步操作历史
      - 历史记录：显示编辑历史时间线
      - 快速恢复：一键恢复到编辑前的状态
  - **预览导出功能**:
    - **截图导出**：导出预览区域的截图
      - 格式选择：PNG/JPG/SVG
      - 分辨率选择：1x/2x/3x（适配不同设备）
      - 背景选择：透明背景/白色背景/设备背景
    - **代码导出**：导出原型的HTML/CSS/JS代码
      - HTML结构：完整的HTML结构代码
      - CSS样式：完整的CSS样式代码（含CSS变量）
      - JavaScript：功能交互代码（如需要）
      - 代码格式：格式化后的代码，带注释说明
    - **设计规范导出**：导出设计规范文档
      - 颜色规范：主色、次色、背景色等
      - 字体规范：字号、字重、行高等
      - 间距规范：内边距、外边距、组件间距
      - 组件规范：按钮、输入框、卡片等组件样式
  - **预览性能优化**:
    - **懒加载**：只渲染可见区域的内容
      - 虚拟滚动：列表项虚拟滚动，只渲染可见项
      - 图片懒加载：图片按需加载，减少初始加载时间
      - 功能模块懒加载：按需加载功能模块代码
    - **缓存机制**：
      - 预览缓存：缓存已生成的预览，避免重复渲染
      - 样式缓存：缓存已应用的样式，快速切换
      - 数据缓存：缓存示例数据，减少生成时间
    - **渲染优化**：
      - CSS动画：使用CSS动画替代JS动画，提升性能
      - 防抖节流：输入防抖、滚动节流，减少计算
      - 批量更新：合并多个样式更新，减少重排重绘

## 数据模型与接口设计

### 样式方案数据结构

```javascript
{
  id: string,           // 样式唯一标识
  name: string,         // 样式名称
  description: string,  // 样式描述
  category: string,     // 样式分类（如：简约、商务、可爱等）
  preview: {
    colors: {
      primary: string,   // 主色调
      secondary: string, // 次色调
      background: string, // 背景色
      text: string      // 文字颜色
    },
    layout: string,     // 布局类型
    features: string[]  // 特色功能列表
  },
  cssFile: string,      // 对应的CSS文件路径
  // 原型生成相关字段（可选）
  prototypeDescription: string,  // 生成该原型的原始描述
  generatedAt: string,          // 生成时间
  isGenerated: boolean,          // 是否为AI生成的原型
  designVariations: {           // 设计差异化参数
    borderRadius: string,        // 圆角大小
    shadowIntensity: string,    // 阴影强度
    spacingScale: string,       // 间距比例
    animationType: string       // 动画类型
  }
}
```

### 示例数据

使用静态JSON文件或JavaScript对象存储样式方案数据，无需后端接口。

### 原型生成接口设计

**输入接口**:
```javascript
{
  description: string,        // 用户的一句话描述
  preferences: {              // 可选偏好设置
    colorTheme: string,       // 颜色主题偏好（浅色/深色/彩色）
    layoutType: string,       // 布局类型偏好（列表/卡片/网格）
    style: string            // 风格偏好（简约/商务/可爱等）
  }
}
```

**输出接口**:
```javascript
{
  success: boolean,           // 生成是否成功
  prototype: {               // 生成的原型数据
    id: string,
    name: string,
    description: string,
    category: string,
    preview: { ... },
    cssFile: string,
    prototypeDescription: string,
    generatedAt: string,
    isGenerated: true,
    designVariations: { ... }
  },
  cssCode: string,           // 生成的CSS代码
  differences: {             // 与现有原型的差异化说明
    colorDifference: number,  // 颜色差异度（0-100）
    layoutDifference: string, // 布局差异说明
    visualDifference: string // 视觉元素差异说明
  }
}
```

**原型生成流程**:
1. 解析用户描述，提取关键词（结构、功能、交互方式等）
2. 分析现有原型的结构和功能点，计算差异化参数
3. 生成符合描述且保持功能点差异化的新原型（包括HTML结构、CSS样式、功能模块）
4. 创建小程序界面结构和样式代码
5. 验证生成的原型质量和功能完整性
6. 返回生成结果和功能点差异化说明

**生成内容包含**:
- **HTML结构**：根据描述生成不同的界面结构（导航位置、布局方式、功能模块等）
- **功能模块**：根据描述添加不同的功能点（搜索、筛选、标签、优先级、时间管理等）
- **交互方式**：根据描述实现不同的交互模式（侧滑、拖拽、批量操作等）
- **CSS样式**：生成对应的样式代码，确保界面美观且符合描述

### 原型功能点差异化策略详解

**1. 结构布局差异化**
- **单栏布局**：传统的单列列表，适合简单场景
- **双栏布局**：左侧分类/筛选，右侧内容列表，适合复杂分类
- **三栏布局**：左侧分类、中间列表、右侧详情，适合详细信息展示
- **顶部导航**：功能按钮在顶部，适合主要操作
- **底部导航**：功能按钮在底部，符合移动端习惯
- **侧边栏导航**：分类和筛选在侧边，节省空间

**2. 功能模块差异化**
- **搜索/筛选功能**：基础搜索、高级筛选、实时搜索
- **分类/标签系统**：分类管理、多标签、标签颜色、标签筛选
- **优先级/状态管理**：优先级标识、完成状态、进行中状态、待办状态
- **时间管理**：时间线视图、日历视图、截止日期提醒、时间排序
- **排序功能**：按时间、按优先级、按分类、自定义排序

**3. 交互方式差异化**
- **操作方式**：点击展开、侧滑操作、长按菜单、右键菜单
- **编辑方式**：内联编辑、弹窗编辑、全屏编辑、分步编辑
- **删除方式**：确认删除、直接删除、批量删除、软删除（归档）
- **添加方式**：快速添加、表单添加、模板添加、批量导入

**4. 数据展示差异化**
- **展示形式**：列表、卡片、网格、时间轴、日历、看板
- **分组方式**：按分类分组、按日期分组、按优先级分组、按状态分组
- **展开方式**：全部展开、折叠分组、手风琴式、树形结构
- **信息密度**：紧凑模式、标准模式、详细模式、预览模式

**5. 功能点差异化示例**

假设现有原型：
- 原型A：单栏布局、列表展示、基础搜索、分类管理
- 原型B：双栏布局、卡片展示、标签系统、优先级管理
- 原型C：顶部导航、网格展示、时间线视图、侧滑操作

生成新原型时的功能点差异化选择：
- 结构：选择三栏布局（未使用的结构）
- 导航：选择底部导航（与现有不同）
- 功能：添加日历视图和拖拽排序（新功能点）
- 交互：选择批量操作和快捷添加（不同的交互方式）
- 展示：选择看板视图（未使用的展示方式）

### 支持的原型描述示例

**结构布局描述**:
- "双栏布局，左侧分类，右侧列表"
- "底部导航的备忘录"
- "三栏布局，带侧边栏筛选"

**功能点描述**:
- "带标签系统和优先级管理的备忘录"
- "日历视图的备忘录，支持拖拽排序"
- "时间轴布局，带侧滑操作和批量编辑"

**交互方式描述**:
- "侧滑操作的备忘录，支持快速添加"
- "批量编辑和批量删除的备忘录"
- "内联编辑，支持拖拽排序"

**组合描述**:
- "双栏布局，左侧分类，右侧带标签系统和日历视图的备忘录"
- "底部导航，侧滑操作，支持优先级管理和时间线展示"
- "三栏布局，带搜索筛选、标签系统、批量操作和看板视图"

## 开发环境要求

### 必需环境
- **操作系统**: Windows 10/11, macOS, 或 Linux
- **浏览器**: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+
- **Node.js**: 不需要（纯前端项目）

### 推荐工具
- **VS Code**: 代码编辑
- **Live Server**: 本地开发服务器
- **Git**: 版本控制

## 文件结构规划

```
项目根目录/
├── index.html              # 主页面
├── css/
│   ├── main.css           # 主样式文件
│   ├── styles/
│   │   ├── style-1.css    # 样式方案1
│   │   ├── style-2.css    # 样式方案2
│   │   └── ...            # 更多样式方案
├── js/
│   ├── main.js            # 主逻辑文件
│   ├── style-manager.js   # 样式管理模块
│   ├── preview.js         # 预览功能模块
│   ├── prototype-generator.js  # 原型生成器模块
│   └── design-differentiator.js # 设计差异化算法
├── data/
│   ├── styles.json        # 样式方案数据
│   └── generated-prototypes.json  # AI生成的原型数据
├── assets/
│   ├── images/            # 图片资源
│   └── icons/             # 图标资源
└── memory-bank/           # 项目文档目录
    ├── project-context.md
    ├── implementation-plan.md
    ├── progress.md
    └── architecture.md
```

## 设计原则

1. **模块化**: 每个样式方案独立CSS文件，便于维护和扩展
2. **响应式**: 支持桌面端和移动端预览
3. **可扩展**: 易于添加新的样式方案
4. **性能优化**: 按需加载样式文件，避免一次性加载所有样式
5. **用户体验**: 流畅的切换动画，清晰的视觉反馈
6. **差异化设计**: 确保每个原型设计在视觉和交互上保持独特性
7. **智能生成**: 基于自然语言描述自动生成符合要求的原型设计
8. **设计一致性**: 生成的原型遵循统一的设计规范和最佳实践

## 验收标准

1. 网站能够正常显示至少3-5种不同的备忘录样式方案
2. 用户可以点击切换不同的样式，预览区域实时更新
3. 所有样式在桌面端和移动端都能正常显示
4. 页面加载速度合理（首屏加载<2秒）
5. 代码结构清晰，符合模块化原则
6. **原型生成功能验收标准**:
   - 用户可以通过一句话描述生成新的原型设计
   - 生成的原型与现有原型在颜色、布局、视觉元素上保持差异化
   - 生成的原型能够正确预览和保存
   - 支持对生成的原型进行编辑和调整
   - 生成的原型符合设计规范和最佳实践
7. **差异化验证标准**:
   - 新生成的原型在颜色方案上与现有原型至少有30%的差异
   - 布局类型自动轮换，避免连续生成相同布局
   - 视觉元素（圆角、阴影、间距）在合理范围内变化
   - 每个原型都有独特的交互效果和动画

